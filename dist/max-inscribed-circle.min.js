(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.maxInscribedCircle = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function pointOnLine(e,t){for(var r=point([1/0,1/0],{dist:1/0}),i=0;i<t.length-1;i++){var o=point(t[i]),n=point(t[i+1]);o.properties.dist=distance(e,o,"miles"),n.properties.dist=distance(e,n,"miles");var s=bearing(o,n),d=destination(e,1e3,s+90,"miles"),a=lineIntersects(e.geometry.coordinates[0],e.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],o.geometry.coordinates[0],o.geometry.coordinates[1],n.geometry.coordinates[0],n.geometry.coordinates[1]);a||(d=destination(e,1e3,s-90,"miles"),a=lineIntersects(e.geometry.coordinates[0],e.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],o.geometry.coordinates[0],o.geometry.coordinates[1],n.geometry.coordinates[0],n.geometry.coordinates[1])),d.properties.dist=1/0;var p;if(a){var p=point(a);p.properties.dist=distance(e,p,"miles")}o.properties.dist<r.properties.dist&&(r=o,r.properties.index=i),n.properties.dist<r.properties.dist&&(r=n,r.properties.index=i),p&&p.properties.dist<r.properties.dist&&(r=p,r.properties.index=i)}return r}function lineIntersects(e,t,r,i,o,n,s,d){var a,p,c,g,m,u={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(a=(d-n)*(r-e)-(s-o)*(i-t))?null!=u.x&&null!=u.y&&u:(p=t-n,c=e-o,g=(s-o)*p-(d-n)*c,m=(r-e)*p-(i-t)*c,p=g/a,c=m/a,u.x=e+p*(r-e),u.y=t+p*(i-t),p>=0&&p<=1&&(u.onLine1=!0),c>=0&&c<=1&&(u.onLine2=!0),!(!u.onLine1||!u.onLine2)&&[u.x,u.y])}var distance=require("turf-distance"),point=require("turf-point"),linestring=require("turf-linestring"),bearing=require("turf-bearing"),destination=require("turf-destination");module.exports=function(e,t){var r;if("Feature"===e.type)r=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");r=e.geometry.coordinates}return pointOnLine(t,r)};
},{"turf-bearing":7,"turf-destination":9,"turf-distance":10,"turf-linestring":15,"turf-point":17}],2:[function(require,module,exports){
const Voronoi = require('voronoi');
const voronoi = new Voronoi;
const centroid = require('turf-centroid');
const point = require('turf-point');
const pointOnLine = require('./lib/turf-point-on-line/index.js');
const within = require('turf-within');
const makeError = require('make-error');
const NoPointsInShapeError = makeError('NoPointsInShapeError');
const GeoJSONUtils = require('./utils/geojson-utils.js');

/**
 * Takes a polygon feature and estimates the best position for label placement that is guaranteed to be inside the polygon. This uses voronoi to estimate the medial axis.
 *
 * @module turf/label-position
 * @param {Polygon} polygon A GeoJSON Polygon feature of the underlying polygon geometry in EPSG:4326
 * @param {number} decimalPlaces A power of 10 used to truncate the decimal places of the polygon sites and
 *   bbox. This is a workaround due to the issue referred to here:
 *   https://github.com/gorhill/Javascript-Voronoi/issues/15
 *   If left empty, will default to tuncating at 20th decimal place.
 * @returns {Point} a Point feature at the best estimated label position
 */

module.exports = function(polygon, decimalPlaces) {
    polygon = GeoJSONUtils.fixMultiPoly(polygon);
    const polySites = GeoJSONUtils.sites(polygon, decimalPlaces);
    const diagram = voronoi.compute(polySites.sites, polySites.bbox);
    const vertices = {
        type: "FeatureCollection",
        features: []
    };
    //construct GeoJSON object of voronoi vertices
    for(let i = 0; i < diagram.vertices.length; i++) {
        vertices.features.push({
            type: "Feature",
            properties: {},
            geometry: {
                type: "Point",
                coordinates: [diagram.vertices[i].x, diagram.vertices[i].y]
            }
        })
    }
    vertices.features.push(centroid(polygon));
    //within requires a FeatureCollection for input polygons
    const polygonFeatureCollection = {
        type: "FeatureCollection",
        features: [polygon]
    };
    const ptsWithin = within(vertices, polygonFeatureCollection); //remove any vertices that are not inside the polygon
    if(ptsWithin.features.length === 0) {
        throw new NoPointsInShapeError('Neither the centroid nor any Voronoi vertices intersect the shape.');
    }
    const labelLocation = {
        coordinates: [0,0],
        maxDist: 0
    };
    const polygonBoundaries = {
        type: "FeatureCollection",
        features: []
    };
    let vertexDistance;

    //define borders of polygon and holes as LineStrings
    for(let j = 0; j < polygon.geometry.coordinates.length; j++) {
        polygonBoundaries.features.push({
            type: "Feature",
            properties: {},
            geometry: {
                type: "LineString",
                coordinates: polygon.geometry.coordinates[j]
            }
        })
    }

    for(let k = 0; k < ptsWithin.features.length; k++) {
        for(let l = 0; l < polygonBoundaries.features.length; l++) {
            if(l === 0) {
                vertexDistance = pointOnLine(polygonBoundaries.features[l], ptsWithin.features[k]).properties.dist;
            } else {
                vertexDistance = Math.min(vertexDistance,
                    pointOnLine(polygonBoundaries.features[l], ptsWithin.features[k]).properties.dist);
            }
        }
        if(vertexDistance > labelLocation.maxDist) {
            labelLocation.coordinates = ptsWithin.features[k].geometry.coordinates;
            labelLocation.maxDist = vertexDistance;
        }
    }

    return point(labelLocation.coordinates);
};

module.exports.NoPointsInShapeError = NoPointsInShapeError;
},{"./lib/turf-point-on-line/index.js":1,"./utils/geojson-utils.js":21,"make-error":5,"turf-centroid":8,"turf-point":17,"turf-within":18,"voronoi":19}],3:[function(require,module,exports){
function geometry(e){var r,t=0;switch(e.type){case"Polygon":return polygonArea(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=polygonArea(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=geometry(e.geometries[r]);return t}}function polygonArea(e){var r=0;if(e&&e.length>0){r+=Math.abs(ringArea(e[0]));for(var t=1;t<e.length;t++)r-=Math.abs(ringArea(e[t]))}return r}function ringArea(e){var r,t,n,o,a,g,s=0,l=e.length;if(l>2){for(i=0;i<l;i++)i===l-2?(o=l-2,a=l-1,g=0):i===l-1?(o=l-1,a=0,g=1):(o=i,a=i+1,g=i+2),r=e[o],t=e[a],n=e[g],s+=(rad(n[0])-rad(r[0]))*Math.sin(rad(t[1]));s=s*wgs84.RADIUS*wgs84.RADIUS/2}return s}function rad(e){return e*Math.PI/180}var wgs84=require("wgs84");module.exports.geometry=geometry,module.exports.ring=ringArea;
},{"wgs84":20}],4:[function(require,module,exports){
(function (global){
!function(n,t){function e(n){return n&&n.__wrapped__?n:this instanceof e?void(this.__wrapped__=n):new e(n)}function r(n,t,e){t||(t=0);var r=n.length,u=r-t>=(e||rt);if(u)for(var o={},i=t-1;++i<r;){var a=n[i]+"";(Et.call(o,a)?o[a]:o[a]=[]).push(n[i])}return function(e){if(u){var r=e+"";return Et.call(o,r)&&fn(o[r],e)>-1}return fn(n,e,t)>-1}}function u(n){return n.charCodeAt(0)}function o(n,e){var r=n.index,u=e.index;if(n=n.criteria,e=e.criteria,n!==e){if(n>e||n===t)return 1;if(n<e||e===t)return-1}return r<u?-1:1}function i(n,t,e){function r(){var a=arguments,c=o?this:t;if(u||(n=t[i]),e.length&&(a=a.length?e.concat(kt.call(a)):e),this instanceof r){s.prototype=n.prototype,c=new s;var l=n.apply(c,a);return k(l)?l:c}return n.apply(c,a)}var u=O(n),o=!e,i=n;return o&&(e=t),r}function a(n,e){return n?"function"!=typeof n?function(t){return t[n]}:e!==t?function(t,r,u){return n.call(e,t,r,u)}:n:Rn}function c(){for(var n,t={arrayLoop:"",bottom:"",hasDontEnumBug:Yn,isKeysFast:Yt,objectLoop:"",noArgsEnum:Vt,noCharByIndex:Qt,shadowed:dt,top:"",useHas:!0},e=0;n=arguments[e];e++)for(var r in n)t[r]=n[r];var u=t.args;return t.firstArg=/^[^,]+/.exec(u)[0],Function("createCallback, hasOwnProperty, isArguments, isString, objectTypes, nativeKeys, propertyIsEnumerable","return function("+u+") {\n"+re(t)+"\n}")(a,Et,h,D,te,Pt,Ot)}function l(n){return"\\"+ee[n]}function f(n){return le[n]}function s(){}function p(n){return fe[n]}function h(n){return Lt.call(n)==Rt}function v(n){var t=!1;if(!n||"object"!=typeof n||h(n))return t;var e=n.constructor;return Wt&&"function"!=typeof n.toString&&"string"==typeof(n+"")||O(e)&&!(e instanceof e)?t:Zn?(ae(n,function(n,e,r){return t=!Et.call(r,e),!1}),!1===t):(ae(n,function(n,e){t=e}),!1===t||Et.call(n,t))}function g(n){var t=[];return ce(n,function(n,e){t.push(e)}),t}function y(n,t,e,r,u){if(null==n)return n;e&&(t=!1);var o=k(n);if(o){var i=Lt.call(n);if(!ne[i]||Gt&&h(n))return n;var a=i==Ht;o=a||(i==Mt?ve(n):o)}if(!o||!t)return o?a?kt.call(n):pe({},n):n;var c=n.constructor;switch(i){case Nt:case qt:return new c(+n);case Ct:case zt:return new c(n);case Kt:return c(n.source,ft.exec(n))}r||(r=[]),u||(u=[]);for(var l=r.length;l--;)if(r[l]==n)return u[l];var f=a?c(n.length):{};return r.push(n),u.push(f),(a?ye:ce)(n,function(n,e){f[e]=y(n,t,null,r,u)}),f}function _(n){var t=[];return ae(n,function(n,e){O(n)&&t.push(e)}),t.sort()}function d(n,t){return!!n&&Et.call(n,t)}function b(n){var t={};return ce(n,function(n,e){t[n]=e}),t}function m(n){return!0===n||!1===n||Lt.call(n)==Nt}function x(n){return Lt.call(n)==qt}function w(n){return!!n&&1===n.nodeType}function j(n){var t=!0;if(!n)return t;var e=Lt.call(n),r=n.length;return e==Ht||e==zt||e==Rt||Gt&&h(n)||e==Mt&&"number"==typeof r&&O(n.splice)?!r:(ce(n,function(){return t=!1}),t)}function E(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;var u=Lt.call(n);if(u!=Lt.call(t))return!1;switch(u){case Nt:case qt:return+n==+t;case Ct:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Kt:case zt:return n==t+""}var o=u==Ht||u==Rt;if(Gt&&!o&&(o=h(n))&&!h(t))return!1;if(!o){if(n.__wrapped__||t.__wrapped__)return E(n.__wrapped__||n,t.__wrapped__||t);if(u!=Mt||Wt&&("function"!=typeof n.toString&&"string"==typeof(n+"")||"function"!=typeof t.toString&&"string"==typeof(t+"")))return!1;var i=n.constructor,a=t.constructor;if(i!=a&&!(O(i)&&i instanceof i&&O(a)&&a instanceof a))return!1}e||(e=[]),r||(r=[]);for(var c=e.length;c--;)if(e[c]==n)return r[c]==t;var l=-1,f=!0,s=0;if(e.push(n),r.push(t),o){if(s=n.length,f=s==t.length)for(;s--&&(f=E(n[s],t[s],e,r)););return f}for(var p in n)if(Et.call(n,p)&&(s++,!Et.call(t,p)||!E(n[p],t[p],e,r)))return!1;for(p in t)if(Et.call(t,p)&&!s--)return!1;if(Yn)for(;++l<7;)if(p=dt[l],Et.call(n,p)&&(!Et.call(t,p)||!E(n[p],t[p],e,r)))return!1;return!0}function A(n){return Bt(n)&&!Dt(parseFloat(n))}function O(n){return"function"==typeof n}function k(n){return!!n&&te[typeof n]}function L(n){return Lt.call(n)==Ct&&n!=+n}function I(n){return null===n}function S(n){return Lt.call(n)==Ct}function B(n){return Lt.call(n)==Kt}function D(n){return Lt.call(n)==zt}function P(n){return n===t}function $(n,t,e){var r=arguments,u=0,o=2,i=r[3],a=r[4];for(e!==tt&&(i=[],a=[],o=r.length);++u<o;)ce(r[u],function(t,e){var r,u,o;if(t&&((u=he(t))||ve(t))){for(var c=i.length;c--&&!(r=i[c]==t););r?n[e]=a[c]:(i.push(t),a.push((o=n[e],o=u?he(o)?o:[]:ve(o)?o:{})),n[e]=$(o,t,tt,i,a))}else null!=t&&(n[e]=t)});return n}function F(n,t,e){var r="function"==typeof t,u={};if(r)t=a(t,e);else var o=xt.apply(nt,arguments);return ae(n,function(n,e,i){(r?!t(n,e,i):fn(o,e,1)<0)&&(u[e]=n)}),u}function T(n){var t=[];return ce(n,function(n,e){t.push([e,n])}),t}function R(n,t,e){var r={};if("function"!=typeof t)for(var u=0,o=xt.apply(nt,arguments),i=o.length;++u<i;){var c=o[u];c in n&&(r[c]=n[c])}else t=a(t,e),ae(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r}function H(n){var t=[];return ce(n,function(n){t.push(n)}),t}function N(n,t,e){var r=-1,u=n?n.length:0;return e=(e<0?$t(0,u+e):e)||0,"number"==typeof u?(D(n)?n.indexOf(t,e):fn(n,t,e))>-1:tn(n,function(n){return++r>=e&&n===t})}function q(n,t,e){var r={};return t=a(t,e),ye(n,function(n,e,u){e=t(n,e,u),Et.call(r,e)?r[e]++:r[e]=1}),r}function C(n,t,e){var r=!0;if(t=a(t,e),he(n))for(var u=-1,o=n.length;++u<o&&(r=!!t(n[u],u,n)););else ye(n,function(n,e,u){return r=!!t(n,e,u)});return r}function M(n,t,e){var r=[];return t=a(t,e),ye(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function K(n,t,e){var r;return t=a(t,e),ye(n,function(n,e,u){if(t(n,e,u))return r=n,!1}),r}function z(n,t,e){var r={};return t=a(t,e),ye(n,function(n,e,u){e=t(n,e,u),(Et.call(r,e)?r[e]:r[e]=[]).push(n)}),r}function U(n,t){var e=kt.call(arguments,2),r="function"==typeof t,u=[];return ye(n,function(n){u.push((r?t:n[t]).apply(n,e))}),u}function V(n,t,e){var r=-1,u=n?n.length:0,o=Array("number"==typeof u?u:0);if(t=a(t,e),he(n))for(;++r<u;)o[r]=t(n[r],r,n);else ye(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function G(n,t,e){var r=-1/0,o=-1,i=n?n.length:0,c=r;if(t||!he(n))t=!t&&D(n)?u:a(t,e),ye(n,function(n,e,u){var o=t(n,e,u);o>r&&(r=o,c=n)});else for(;++o<i;)n[o]>c&&(c=n[o]);return c}function J(n,t,e){var r=1/0,o=-1,i=n?n.length:0,c=r;if(t||!he(n))t=!t&&D(n)?u:a(t,e),ye(n,function(n,e,u){var o=t(n,e,u);o<r&&(r=o,c=n)});else for(;++o<i;)n[o]<c&&(c=n[o]);return c}function Q(n,t){var e=[];return ye(n,function(n){e.push(n[t])}),e}function W(n,t,e,r){var u=arguments.length<3;return t=a(t,r),ye(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function X(n,t,e,r){var u=n,o=n?n.length:0,i=arguments.length<3;if("number"!=typeof o){var a=ge(n);o=a.length}else Qt&&D(n)&&(u=n.split(""));return ye(n,function(n,c,l){c=a?a[--o]:--o,e=i?(i=!1,u[c]):t.call(r,e,u[c],c,l)}),e}function Y(n,t,e){return t=a(t,e),M(n,function(n,e,r){return!t(n,e,r)})}function Z(n){var t=-1,e=Array(n?n.length:0);return ye(n,function(n){var r=wt(Tt()*(++t+1));e[t]=e[r],e[r]=n}),e}function nn(n){var t=n?n.length:0;return"number"==typeof t?t:ge(n).length}function tn(n,t,e){var r;if(t=a(t,e),he(n))for(var u=-1,o=n.length;++u<o&&!(r=t(n[u],u,n)););else ye(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function en(n,t,e){var r=[];t=a(t,e),ye(n,function(n,e,u){r.push({criteria:t(n,e,u),index:e,value:n})});var u=r.length;for(r.sort(o);u--;)r[u]=r[u].value;return r}function rn(n){return n&&"number"==typeof n.length?(Jt?D(n):"string"==typeof n)?n.split(""):kt.call(n):H(n)}function un(n,t){var e=[];return ae(t,function(n,t){e.push(t)}),M(n,function(n){for(var r=e.length;r--;){var u=n[e[r]]===t[e[r]];if(!u)break}return!!u})}function on(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r}function an(n){for(var t=-1,e=n?n.length:0,u=xt.apply(nt,arguments),o=r(u,e),i=[];++t<e;){var a=n[t];o(a)||i.push(a)}return i}function cn(n,t,e){if(n)return null==t||e?n[0]:kt.call(n,0,t)}function ln(n,t){for(var e=-1,r=n?n.length:0,u=[];++e<r;){var o=n[e];he(o)?At.apply(u,t?o:ln(o)):u.push(o)}return u}function fn(n,t,e){var r=-1,u=n?n.length:0;if("number"==typeof e)r=(e<0?$t(0,u+e):e||0)-1;else if(e)return r=dn(n,t),n[r]===t?r:-1;for(;++r<u;)if(n[r]===t)return r;return-1}function sn(n,t,e){return n?kt.call(n,0,-(null==t||e?1:t)):[]}function pn(n){var t=arguments,e=t.length,u={},o=[];return ye(n,function(n){if(fn(o,n)<0){for(var i=e;--i;)if(!(u[i]||(u[i]=r(t[i])))(n))return;o.push(n)}}),o}function hn(n,t,e){if(n){var r=n.length;return null==t||e?n[r-1]:kt.call(n,-t||r)}}function vn(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(e<0?$t(0,r+e):Ft(e,r-1))+1);r--;)if(n[r]===t)return r;return-1}function gn(n,t){for(var e=-1,r=n?n.length:0,u={};++e<r;){var o=n[e];t?u[o]=t[e]:u[o[0]]=o[1]}return u}function yn(n,t,e){n=+n||0,e=+e||1,null==t&&(t=n,n=0);for(var r=-1,u=$t(0,mt((t-n)/e)),o=Array(u);++r<u;)o[r]=n,n+=e;return o}function _n(n,t,e){return n?kt.call(n,null==t||e?1:t):[]}function dn(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?a(e,r):Rn,t=e(t);u<o;){var i=u+o>>>1;e(n[i])<t?u=i+1:o=i}return u}function bn(){return mn(xt.apply(nt,arguments))}function mn(n,t,e,r){var u=-1,o=n?n.length:0,i=[],c=i;"function"==typeof t&&(r=e,e=t,t=!1);var l=!t&&o>74;if(l)var f={};for(e&&(c=[],e=a(e,r));++u<o;){var s=n[u],p=e?e(s,u,n):s;l&&(c=Et.call(f,p+"")?f[p]:f[p]=[]),(t?!u||c[c.length-1]!==p:fn(c,p)<0)&&((e||l)&&c.push(p),i.push(s))}return i}function xn(n){for(var t=-1,e=n?n.length:0,u=r(arguments,1,20),o=[];++t<e;){var i=n[t];u(i)||o.push(i)}return o}function wn(n){for(var t=-1,e=n?G(Q(arguments,"length")):0,r=Array(e);++t<e;)r[t]=Q(arguments,t);return r}function jn(n,t){return n<1?t():function(){if(--n<1)return t.apply(this,arguments)}}function En(n,t){return Xt||It&&arguments.length>2?It.call.apply(It,arguments):i(n,t,kt.call(arguments,2))}function An(n){for(var t=arguments,e=t.length>1?0:(t=_(n),-1),r=t.length;++e<r;){var u=t[e];n[u]=En(n[u],n)}return n}function On(){var n=arguments;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}}function kn(n,t,e){function r(){a=null,e||(o=n.apply(i,u))}var u,o,i,a;return function(){var c=e&&!a;return u=arguments,i=this,clearTimeout(a),a=setTimeout(r,t),c&&(o=n.apply(i,u)),o}}function Ln(n,e){var r=kt.call(arguments,2);return setTimeout(function(){n.apply(t,r)},e)}function In(n){var e=kt.call(arguments,1);return setTimeout(function(){n.apply(t,e)},1)}function Sn(n,t){return i(t,n,kt.call(arguments,2))}function Bn(n,t){var e={};return function(){var r=t?t.apply(this,arguments):arguments[0];return Et.call(e,r)?e[r]:e[r]=n.apply(this,arguments)}}function Dn(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}}function Pn(n){return i(n,kt.call(arguments,1))}function $n(n,t){function e(){a=new Date,i=null,u=n.apply(o,r)}var r,u,o,i,a=0;return function(){var c=new Date,l=t-(c-a);return r=arguments,o=this,l<=0?(clearTimeout(i),a=c,u=n.apply(o,r)):i||(i=setTimeout(e,l)),u}}function Fn(n,t){return function(){var e=[n];return At.apply(e,arguments),t.apply(this,e)}}function Tn(n){return null==n?"":(n+"").replace(yt,f)}function Rn(n){return n}function Hn(n){ye(_(n),function(t){var r=e[t]=n[t];e.prototype[t]=function(){var n=[this.__wrapped__];At.apply(n,arguments);var t=r.apply(e,n);return this.__chain__&&(t=new e(t),t.__chain__=!0),t}})}function Nn(){return n._=ut,this}function qn(n,t){return null==n&&null==t&&(t=1),n=+n||0,null==t&&(t=n,n=0),n+wt(Tt()*((+t||0)-n+1))}function Cn(n,t){var e=n?n[t]:null;return O(e)?n[t]():e}function Mn(n,t,r){n||(n=""),r||(r={});var u,o,i=e.templateSettings,a=0,c=r.interpolate||i.interpolate||gt,f="__p += '",s=r.variable||i.variable,p=s,h=RegExp((r.escape||i.escape||gt).source+"|"+c.source+"|"+(c===vt?ht:gt).source+"|"+(r.evaluate||i.evaluate||gt).source+"|$","g");if(n.replace(h,function(t,e,r,o,i,c){r||(r=o),f+=n.slice(a,c).replace(_t,l),f+=e?"' +\n__e("+e+") +\n'":i?"';\n"+i+";\n__p += '":r?"' +\n((__t = ("+r+")) == null ? '' : __t) +\n'":"",u||(u=i||ot.test(e||r)),a=c+t.length}),f+="';\n",!p)if(s="obj",u)f="with ("+s+") {\n"+f+"\n}\n";else{var v=RegExp("(\\(\\s*)"+s+"\\."+s+"\\b","g");f=f.replace(st,"$&"+s+".").replace(v,"$1__d")}f=(u?f.replace(at,""):f).replace(ct,"$1").replace(lt,"$1;"),f="function("+s+") {\n"+(p?"":s+" || ("+s+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(p?"":", __d = "+s+"."+s+" || "+s)+";\n")+f+"return __p\n}";var g=Zt?"\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+bt+++"]"):"";try{o=Function("_","return "+f+g)(e)}catch(n){throw n.source=f,n}return t?o(t):(o.source=f,o)}function Kn(n,t,e){n=+n||0;for(var r=-1,u=Array(n);++r<n;)u[r]=t.call(e,r);return u}function zn(n){return null==n?"":(n+"").replace(it,p)}function Un(n){var t=et++;return n?n+t:t}function Vn(n){return n=new e(n),n.__chain__=!0,n}function Gn(n,t){return t(n),n}function Jn(){return this.__chain__=!0,this}function Qn(){return this.__wrapped__}var Wn="object"==typeof exports&&exports,Xn="object"==typeof global&&global;Xn.global===Xn&&(n=Xn);var Yn,Zn,nt=[],tt=new function(){},et=0,rt=30,ut=n._,ot=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,it=/&(?:amp|lt|gt|quot|#x27);/g,at=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,lt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/\w*$/,st=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,pt=RegExp("^"+(tt.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ht=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,vt=/<%=([\s\S]+?)%>/g,gt=/($^)/,yt=/[&<>"']/g,_t=/['\n\r\t\u2028\u2029\\]/g,dt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bt=0,mt=Math.ceil,xt=nt.concat,wt=Math.floor,jt=pt.test(jt=Object.getPrototypeOf)&&jt,Et=tt.hasOwnProperty,At=nt.push,Ot=tt.propertyIsEnumerable,kt=nt.slice,Lt=tt.toString,It=pt.test(It=kt.bind)&&It,St=pt.test(St=Array.isArray)&&St,Bt=n.isFinite,Dt=n.isNaN,Pt=pt.test(Pt=Object.keys)&&Pt,$t=Math.max,Ft=Math.min,Tt=Math.random,Rt="[object Arguments]",Ht="[object Array]",Nt="[object Boolean]",qt="[object Date]",Ct="[object Number]",Mt="[object Object]",Kt="[object RegExp]",zt="[object String]",Ut=(Ut={0:1,length:1},nt.splice.call(Ut,0,1),Ut[0]),Vt=!0;!function(){function n(){this.x=1}var t=[];n.prototype={valueOf:1,y:1};for(var e in new n)t.push(e);for(e in arguments)Vt=!e;Yn=!/valueOf/.test(t),Zn="x"!=t[0]}(1);var Gt=!h(arguments),Jt="x"!=kt.call("x")[0],Qt="x"[0]+Object("x")[0]!="xx";try{var Wt=Lt.call(n.document||0)==Mt}catch(n){}var Xt=It&&/\n|Opera/.test(It+Lt.call(n.opera)),Yt=Pt&&/^.+$|true/.test(Pt+!!n.attachEvent);try{var Zt=(Function("//@")(),!n.attachEvent)}catch(n){}var ne={};ne[Rt]=ne["[object Function]"]=!1,ne[Ht]=ne[Nt]=ne[qt]=ne[Ct]=ne[Mt]=ne[Kt]=ne[zt]=!0;var te={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},ee={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:vt,variable:""};var re=Mn("<% if (obj.useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result = <%= firstArg %>;\nif (!<%= firstArg %>) return result;\n<%= top %>;\n<% if (arrayLoop) { %>var length = iteratee.length; index = -1;\nif (typeof length == 'number') {  <% if (noCharByIndex) { %>\n  if (isString(iteratee)) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayLoop %>\n  }\n}\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectLoop %>\n  }    <% } %>  <% } %>  <% if (arrayLoop || noArgsEnum) { %>\n}<% } %>\n<%= bottom %>;\nreturn result"),ue={args:"collection, callback, thisArg",top:"callback = createCallback(callback, thisArg)",arrayLoop:"if (callback(value, index, collection) === false) return result",objectLoop:"if (callback(value, index, collection) === false) return result"},oe={useHas:!1,args:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",objectLoop:"result[index] = value",bottom:"  }\n}"},ie={arrayLoop:null};Gt&&(h=function(n){return!!n&&Et.call(n,"callee")});var ae=c(ue,ie,{useHas:!1}),ce=c(ue,ie),le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},fe=b(le),se=c(oe,{objectLoop:"if (result[index] == null) "+oe.objectLoop}),pe=c(oe),he=St||function(n){return Lt.call(n)==Ht};O(/x/)&&(O=function(n){return"[object Function]"==Lt.call(n)});var ve=jt?function(n){if(!n||"object"!=typeof n)return!1;var t=n.valueOf,e="function"==typeof t&&(e=jt(t))&&jt(e);return e?n==e||jt(n)==e&&!h(n):v(n)}:v,ge=Pt?function(n){return"function"==typeof n&&Ot.call(n,"prototype")?g(n):k(n)?Pt(n):[]}:g,ye=c(ue);e.VERSION="0.9.2",e.after=jn,e.bind=En,e.bindAll=An,e.chain=Vn,e.clone=y,e.compact=on,e.compose=On,e.contains=N,e.countBy=q,e.debounce=kn,e.defaults=se,e.defer=In,e.delay=Ln,e.difference=an,e.escape=Tn,e.every=C,e.extend=pe,e.filter=M,e.find=K,e.first=cn,e.flatten=ln,e.forEach=ye,e.forIn=ae,e.forOwn=ce,e.functions=_,e.groupBy=z,e.has=d,e.identity=Rn,e.indexOf=fn,e.initial=sn,e.intersection=pn,e.invert=b,e.invoke=U,e.isArguments=h,e.isArray=he,e.isBoolean=m,e.isDate=x,e.isElement=w,e.isEmpty=j,e.isEqual=E,e.isFinite=A,e.isFunction=O,e.isNaN=L,e.isNull=I,e.isNumber=S,e.isObject=k,e.isPlainObject=ve,e.isRegExp=B,e.isString=D,e.isUndefined=P,e.keys=ge,e.last=hn,e.lastIndexOf=vn,e.lateBind=Sn,e.map=V,e.max=G,e.memoize=Bn,e.merge=$,e.min=J,e.mixin=Hn,e.noConflict=Nn,e.object=gn,e.omit=F,e.once=Dn,e.pairs=T,e.partial=Pn,e.pick=R,e.pluck=Q,e.random=qn,e.range=yn,e.reduce=W,e.reduceRight=X,e.reject=Y,e.rest=_n,e.result=Cn,e.shuffle=Z,e.size=nn,e.some=tn,e.sortBy=en,e.sortedIndex=dn,e.tap=Gn,e.template=Mn,e.throttle=$n,e.times=Kn,e.toArray=rn,e.unescape=zn,e.union=bn,e.uniq=mn,e.uniqueId=Un,e.values=H,e.where=un,e.without=xn,e.wrap=Fn,e.zip=wn,e.all=C,e.any=tn,e.collect=V,e.detect=K,e.drop=_n,e.each=ye,e.foldl=W,e.foldr=X,e.head=cn,e.include=N,e.inject=W,e.methods=_,e.select=M,e.tail=_n,e.take=cn,e.unique=mn,e._iteratorTemplate=re,Hn(e),e.prototype.chain=Jn,e.prototype.value=Qn,ye(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=nt[n];e.prototype[n]=function(){var n=this.__wrapped__;return t.apply(n,arguments),Ut&&0===n.length&&delete n[0],this.__chain__&&(n=new e(n),n.__chain__=!0),n}}),ye(["concat","join","slice"],function(n){var t=nt[n];e.prototype[n]=function(){var n=this.__wrapped__,r=t.apply(n,arguments);return this.__chain__&&(r=new e(r),r.__chain__=!0),r}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n._=e,define(function(){return e})):Wn?"object"==typeof module&&module&&module.exports==Wn?(module.exports=e)._=e:Wn._=e:n._=e}(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],5:[function(require,module,exports){
"use strict";function BaseError(r){void 0!==r&&defineProperty(this,"message",{configurable:!0,value:r,writable:!0});var e=this.constructor.name;void 0!==e&&e!==this.name&&defineProperty(this,"name",{configurable:!0,value:e,writable:!0}),captureStackTrace(this,this.constructor)}function makeError(r,e){if(null==e||e===Error)e=BaseError;else if("function"!=typeof e)throw new TypeError("super_ should be a function");var t;if("string"==typeof r)t=r,r=void 0!==construct?function(){return construct(e,arguments,this.constructor)}:function(){e.apply(this,arguments)},void 0!==setFunctionName&&(setFunctionName(r,t),t=void 0);else if("function"!=typeof r)throw new TypeError("constructor should be either a string or a function");r.super_=r.super=e;var o={constructor:{configurable:!0,value:r,writable:!0}};return void 0!==t&&(o.name={configurable:!0,value:t,writable:!0}),r.prototype=Object.create(e.prototype,o),r}var construct="undefined"!=typeof Reflect?Reflect.construct:void 0,defineProperty=Object.defineProperty,captureStackTrace=Error.captureStackTrace;void 0===captureStackTrace&&(captureStackTrace=function(r){var e=new Error;defineProperty(r,"stack",{configurable:!0,get:function(){var r=e.stack;return defineProperty(this,"stack",{configurable:!0,value:r,writable:!0}),r},set:function(e){defineProperty(r,"stack",{configurable:!0,value:e,writable:!0})}})}),BaseError.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:BaseError,writable:!0}});var setFunctionName=function(){function r(r,e){return defineProperty(r,"name",{configurable:!0,value:e})}try{var e=function(){};if(r(e,"foo"),"foo"===e.name)return r}catch(r){}}();exports=module.exports=makeError,exports.BaseError=BaseError;
},{}],6:[function(require,module,exports){
var geometryArea=require("geojson-area").geometry;module.exports=function(e){if("FeatureCollection"===e.type){for(var r=0,t=0;r<e.features.length;r++)e.features[r].geometry&&(t+=geometryArea(e.features[r].geometry));return t}return geometryArea("Feature"===e.type?e.geometry:e)};
},{"geojson-area":3}],7:[function(require,module,exports){
function toRad(t){return t*Math.PI/180}function toDeg(t){return 180*t/Math.PI}module.exports=function(t,o){var a=t.geometry.coordinates,n=o.geometry.coordinates,e=toRad(a[0]),r=toRad(n[0]),h=toRad(a[1]),s=toRad(n[1]),M=Math.sin(r-e)*Math.cos(s),c=Math.cos(h)*Math.sin(s)-Math.sin(h)*Math.cos(s)*Math.cos(r-e);return toDeg(Math.atan2(M,c))};
},{}],8:[function(require,module,exports){
var each=require("turf-meta").coordEach,point=require("turf-helpers").point;module.exports=function(r){var e=0,t=0,o=0;return each(r,function(r){e+=r[0],t+=r[1],o++},!0),point([e/o,t/o])};
},{"turf-helpers":12,"turf-meta":16}],9:[function(require,module,exports){
function toRad(t){return t*Math.PI/180}function toDeg(t){return 180*t/Math.PI}var point=require("turf-point");module.exports=function(t,a,e,o){var s=t.geometry.coordinates,n=toRad(s[0]),r=toRad(s[1]),i=toRad(e),h=0;switch(o){case"miles":h=3960;break;case"kilometers":h=6373;break;case"degrees":h=57.2957795;break;case"radians":h=1}var M=Math.asin(Math.sin(r)*Math.cos(a/h)+Math.cos(r)*Math.sin(a/h)*Math.cos(i)),c=n+Math.atan2(Math.sin(i)*Math.sin(a/h)*Math.cos(r),Math.cos(a/h)-Math.sin(r)*Math.sin(M));return point([toDeg(c),toDeg(M)])};
},{"turf-point":17}],10:[function(require,module,exports){
function toRad(a){return a*Math.PI/180}var invariant=require("turf-invariant");module.exports=function(a,t,e){invariant.featureOf(a,"Point","distance"),invariant.featureOf(t,"Point","distance");var r,n=a.geometry.coordinates,o=t.geometry.coordinates,i=toRad(o[1]-n[1]),s=toRad(o[0]-n[0]),c=toRad(n[1]),d=toRad(o[1]),h=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(c)*Math.cos(d),u=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));switch(e){case"miles":r=3960;break;case"kilometers":case"kilometres":r=6373;break;case"degrees":r=57.2957795;break;case"radians":r=1;break;case void 0:r=6373;break;default:throw new Error('unknown option given to "units"')}return r*u};
},{"turf-invariant":14}],11:[function(require,module,exports){
module.exports=function(e){return{type:"FeatureCollection",features:e}};
},{}],12:[function(require,module,exports){
function feature(e,r){return{type:"Feature",properties:r||{},geometry:e}}module.exports.feature=feature,module.exports.point=function(e,r){if(!Array.isArray(e))throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");return feature({type:"Point",coordinates:e.slice()},r)},module.exports.polygon=function(e,r){if(!e)throw new Error("No coordinates passed");for(var o=0;o<e.length;o++){var t=e[o];if(t.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var n=0;n<t[t.length-1].length;n++)if(t[t.length-1][n]!==t[0][n])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:e},r)},module.exports.lineString=function(e,r){if(!e)throw new Error("No coordinates passed");return feature({type:"LineString",coordinates:e},r)},module.exports.featureCollection=function(e){return{type:"FeatureCollection",features:e}},module.exports.multiLineString=function(e,r){if(!e)throw new Error("No coordinates passed");return feature({type:"MultiLineString",coordinates:e},r)},module.exports.multiPoint=function(e,r){if(!e)throw new Error("No coordinates passed");return feature({type:"MultiPoint",coordinates:e},r)},module.exports.multiPolygon=function(e,r){if(!e)throw new Error("No coordinates passed");return feature({type:"MultiPolygon",coordinates:e},r)},module.exports.geometryCollection=function(e,r){return feature({type:"GeometryCollection",geometries:e},r)};var factors={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};module.exports.radiansToDistance=function(e,r){var o=factors[r||"kilometers"];if(void 0===o)throw new Error("Invalid unit");return e*o},module.exports.distanceToRadians=function(e,r){var o=factors[r||"kilometers"];if(void 0===o)throw new Error("Invalid unit");return e/o},module.exports.distanceToDegrees=function(e,r){var o=factors[r||"kilometers"];if(void 0===o)throw new Error("Invalid unit");return e/o*57.2958};
},{}],13:[function(require,module,exports){
function inRing(e,n){for(var r=!1,o=0,t=n.length-1;o<n.length;t=o++){var g=n[o][0],i=n[o][1],a=n[t][0],f=n[t][1];i>e[1]!=f>e[1]&&e[0]<(a-g)*(e[1]-i)/(f-i)+g&&(r=!r)}return r}module.exports=function(e,n){var r=n.geometry.coordinates,o=[e.geometry.coordinates[0],e.geometry.coordinates[1]];"Polygon"===n.geometry.type&&(r=[r]);for(var t=!1,g=0;g<r.length&&!t;){if(inRing(o,r[g][0])){for(var i=!1,a=1;a<r[g].length&&!i;)inRing(o,r[g][a])&&(i=!0),a++;i||(t=!0)}g++}return t};
},{}],14:[function(require,module,exports){
function geojsonType(e,r,t){if(!r||!t)throw new Error("type and name required");if(!e||e.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.type)}function featureOf(e,r,t){if(!t)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.geometry.type)}function collectionOf(e,r,t){if(!t)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0;o<e.features.length;o++){var n=e.features[o];if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+n.geometry.type)}}module.exports.geojsonType=geojsonType,module.exports.collectionOf=collectionOf,module.exports.featureOf=featureOf;
},{}],15:[function(require,module,exports){
module.exports=function(e,r){if(!e)throw new Error("No coordinates passed");return{type:"Feature",geometry:{type:"LineString",coordinates:e},properties:r||{}}};
},{}],16:[function(require,module,exports){
function coordEach(e,o,t){var r,n,c,u,l,p,a,i,f,h,s=0,d="FeatureCollection"===e.type,y="Feature"===e.type,g=d?e.features.length:1;for(r=0;r<g;r++)for(f=d?e.features[r].geometry:y?e.geometry:e,h="GeometryCollection"===f.type,a=h?f.geometries.length:1,u=0;u<a;u++)if(p=h?f.geometries[u]:f,i=p.coordinates,s=!t||"Polygon"!==p.type&&"MultiPolygon"!==p.type?0:1,"Point"===p.type)o(i);else if("LineString"===p.type||"MultiPoint"===p.type)for(n=0;n<i.length;n++)o(i[n]);else if("Polygon"===p.type||"MultiLineString"===p.type)for(n=0;n<i.length;n++)for(c=0;c<i[n].length-s;c++)o(i[n][c]);else{if("MultiPolygon"!==p.type)throw new Error("Unknown Geometry Type");for(n=0;n<i.length;n++)for(c=0;c<i[n].length;c++)for(l=0;l<i[n][c].length-s;l++)o(i[n][c][l])}}function coordReduce(e,o,t,r){return coordEach(e,function(e){t=o(t,e)},r),t}function propEach(e,o){var t;switch(e.type){case"FeatureCollection":for(t=0;t<e.features.length;t++)o(e.features[t].properties);break;case"Feature":o(e.properties)}}function propReduce(e,o,t){return propEach(e,function(e){t=o(t,e)}),t}function featureEach(e,o){if("Feature"===e.type)o(e);else if("FeatureCollection"===e.type)for(var t=0;t<e.features.length;t++)o(e.features[t])}function coordAll(e){var o=[];return coordEach(e,function(e){o.push(e)}),o}module.exports.coordEach=coordEach,module.exports.coordReduce=coordReduce,module.exports.propEach=propEach,module.exports.propReduce=propReduce,module.exports.featureEach=featureEach,module.exports.coordAll=coordAll;
},{}],17:[function(require,module,exports){
var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};module.exports=function(r,t){if(!isArray(r))throw new Error("Coordinates must be an array");if(r.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:r},properties:t||{}}};
},{}],18:[function(require,module,exports){
var inside=require("turf-inside"),featureCollection=require("turf-featurecollection");module.exports=function(e,r){for(var t=featureCollection([]),u=0;u<r.features.length;u++)for(var f=0;f<e.features.length;f++){var a=inside(e.features[f],r.features[u]);a&&t.features.push(e.features[f])}return t};
},{"turf-featurecollection":11,"turf-inside":13}],19:[function(require,module,exports){
function Voronoi(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}Voronoi.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var e=this.beachline.getFirst(this.beachline.root);e;)this.beachsectionJunkyard.push(e),e=e.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},Voronoi.prototype.sqrt=Math.sqrt,Voronoi.prototype.abs=Math.abs,Voronoi.prototype.ε=Voronoi.ε=1e-9,Voronoi.prototype.invε=Voronoi.invε=1/Voronoi.ε,Voronoi.prototype.equalWithEpsilon=function(e,t){return this.abs(e-t)<1e-9},Voronoi.prototype.greaterThanWithEpsilon=function(e,t){return e-t>1e-9},Voronoi.prototype.greaterThanOrEqualWithEpsilon=function(e,t){return t-e<1e-9},Voronoi.prototype.lessThanWithEpsilon=function(e,t){return t-e>1e-9},Voronoi.prototype.lessThanOrEqualWithEpsilon=function(e,t){return e-t<1e-9},Voronoi.prototype.RBTree=function(){this.root=null},Voronoi.prototype.RBTree.prototype.rbInsertSuccessor=function(e,t){var r;if(e){if(t.rbPrevious=e,t.rbNext=e.rbNext,e.rbNext&&(e.rbNext.rbPrevious=t),e.rbNext=t,e.rbRight){for(e=e.rbRight;e.rbLeft;)e=e.rbLeft;e.rbLeft=t}else e.rbRight=t;r=e}else this.root?(e=this.getFirst(this.root),t.rbPrevious=null,t.rbNext=e,e.rbPrevious=t,e.rbLeft=t,r=e):(t.rbPrevious=t.rbNext=null,this.root=t,r=null);t.rbLeft=t.rbRight=null,t.rbParent=r,t.rbRed=!0;var i,o;for(e=t;r&&r.rbRed;)i=r.rbParent,r===i.rbLeft?(o=i.rbRight,o&&o.rbRed?(r.rbRed=o.rbRed=!1,i.rbRed=!0,e=i):(e===r.rbRight&&(this.rbRotateLeft(r),e=r,r=e.rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateRight(i))):(o=i.rbLeft,o&&o.rbRed?(r.rbRed=o.rbRed=!1,i.rbRed=!0,e=i):(e===r.rbLeft&&(this.rbRotateRight(r),e=r,r=e.rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateLeft(i))),r=e.rbParent;this.root.rbRed=!1},Voronoi.prototype.RBTree.prototype.rbRemoveNode=function(e){e.rbNext&&(e.rbNext.rbPrevious=e.rbPrevious),e.rbPrevious&&(e.rbPrevious.rbNext=e.rbNext),e.rbNext=e.rbPrevious=null;var t,r=e.rbParent,i=e.rbLeft,o=e.rbRight;t=i?o?this.getFirst(o):i:o,r?r.rbLeft===e?r.rbLeft=t:r.rbRight=t:this.root=t;var s;if(i&&o?(s=t.rbRed,t.rbRed=e.rbRed,t.rbLeft=i,i.rbParent=t,t!==o?(r=t.rbParent,t.rbParent=e.rbParent,e=t.rbRight,r.rbLeft=e,t.rbRight=o,o.rbParent=t):(t.rbParent=r,r=t,e=t.rbRight)):(s=e.rbRed,e=t),e&&(e.rbParent=r),!s){if(e&&e.rbRed)return void(e.rbRed=!1);var n;do{if(e===this.root)break;if(e===r.rbLeft){if(n=r.rbRight,n.rbRed&&(n.rbRed=!1,r.rbRed=!0,this.rbRotateLeft(r),n=r.rbRight),n.rbLeft&&n.rbLeft.rbRed||n.rbRight&&n.rbRight.rbRed){n.rbRight&&n.rbRight.rbRed||(n.rbLeft.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),n=r.rbRight),n.rbRed=r.rbRed,r.rbRed=n.rbRight.rbRed=!1,this.rbRotateLeft(r),e=this.root;break}}else if(n=r.rbLeft,n.rbRed&&(n.rbRed=!1,r.rbRed=!0,this.rbRotateRight(r),n=r.rbLeft),n.rbLeft&&n.rbLeft.rbRed||n.rbRight&&n.rbRight.rbRed){n.rbLeft&&n.rbLeft.rbRed||(n.rbRight.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),n=r.rbLeft),n.rbRed=r.rbRed,r.rbRed=n.rbLeft.rbRed=!1,this.rbRotateRight(r),e=this.root;break}n.rbRed=!0,e=r,r=r.rbParent}while(!e.rbRed);e&&(e.rbRed=!1)}},Voronoi.prototype.RBTree.prototype.rbRotateLeft=function(e){var t=e,r=e.rbRight,i=t.rbParent;i?i.rbLeft===t?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,t.rbParent=r,t.rbRight=r.rbLeft,t.rbRight&&(t.rbRight.rbParent=t),r.rbLeft=t},Voronoi.prototype.RBTree.prototype.rbRotateRight=function(e){var t=e,r=e.rbLeft,i=t.rbParent;i?i.rbLeft===t?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,t.rbParent=r,t.rbLeft=r.rbRight,t.rbLeft&&(t.rbLeft.rbParent=t),r.rbRight=t},Voronoi.prototype.RBTree.prototype.getFirst=function(e){for(;e.rbLeft;)e=e.rbLeft;return e},Voronoi.prototype.RBTree.prototype.getLast=function(e){for(;e.rbRight;)e=e.rbRight;return e},Voronoi.prototype.Diagram=function(e){this.site=e},Voronoi.prototype.Cell=function(e){this.site=e,this.halfedges=[],this.closeMe=!1},Voronoi.prototype.Cell.prototype.init=function(e){return this.site=e,this.halfedges=[],this.closeMe=!1,this},Voronoi.prototype.createCell=function(e){var t=this.cellJunkyard.pop();return t?t.init(e):new this.Cell(e)},Voronoi.prototype.Cell.prototype.prepareHalfedges=function(){for(var e,t=this.halfedges,r=t.length;r--;)e=t[r].edge,e.vb&&e.va||t.splice(r,1);return t.sort(function(e,t){return t.angle-e.angle}),t.length},Voronoi.prototype.Cell.prototype.getNeighborIds=function(){for(var e,t=[],r=this.halfedges.length;r--;)e=this.halfedges[r].edge,null!==e.lSite&&e.lSite.voronoiId!=this.site.voronoiId?t.push(e.lSite.voronoiId):null!==e.rSite&&e.rSite.voronoiId!=this.site.voronoiId&&t.push(e.rSite.voronoiId);return t},Voronoi.prototype.Cell.prototype.getBbox=function(){for(var e,t,r,i=this.halfedges,o=i.length,s=1/0,n=1/0,h=-1/0,a=-1/0;o--;)e=i[o].getStartpoint(),t=e.x,r=e.y,t<s&&(s=t),r<n&&(n=r),t>h&&(h=t),r>a&&(a=r);return{x:s,y:n,width:h-s,height:a-n}},Voronoi.prototype.Cell.prototype.pointIntersection=function(e,t){for(var r,i,o,s,n=this.halfedges,h=n.length;h--;){if(r=n[h],i=r.getStartpoint(),o=r.getEndpoint(),!(s=(t-i.y)*(o.x-i.x)-(e-i.x)*(o.y-i.y)))return 0;if(s>0)return-1}return 1},Voronoi.prototype.Vertex=function(e,t){this.x=e,this.y=t},Voronoi.prototype.Edge=function(e,t){this.lSite=e,this.rSite=t,this.va=this.vb=null},Voronoi.prototype.Halfedge=function(e,t,r){if(this.site=t,this.edge=e,r)this.angle=Math.atan2(r.y-t.y,r.x-t.x);else{var i=e.va,o=e.vb;this.angle=e.lSite===t?Math.atan2(o.x-i.x,i.y-o.y):Math.atan2(i.x-o.x,o.y-i.y)}},Voronoi.prototype.createHalfedge=function(e,t,r){return new this.Halfedge(e,t,r)},Voronoi.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},Voronoi.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},Voronoi.prototype.createVertex=function(e,t){var r=this.vertexJunkyard.pop();return r?(r.x=e,r.y=t):r=new this.Vertex(e,t),this.vertices.push(r),r},Voronoi.prototype.createEdge=function(e,t,r,i){var o=this.edgeJunkyard.pop();return o?(o.lSite=e,o.rSite=t,o.va=o.vb=null):o=new this.Edge(e,t),this.edges.push(o),r&&this.setEdgeStartpoint(o,e,t,r),i&&this.setEdgeEndpoint(o,e,t,i),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(o,e,t)),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(o,t,e)),o},Voronoi.prototype.createBorderEdge=function(e,t,r){var i=this.edgeJunkyard.pop();return i?(i.lSite=e,i.rSite=null):i=new this.Edge(e,null),i.va=t,i.vb=r,this.edges.push(i),i},Voronoi.prototype.setEdgeStartpoint=function(e,t,r,i){e.va||e.vb?e.lSite===r?e.vb=i:e.va=i:(e.va=i,e.lSite=t,e.rSite=r)},Voronoi.prototype.setEdgeEndpoint=function(e,t,r,i){this.setEdgeStartpoint(e,r,t,i)},Voronoi.prototype.Beachsection=function(){},Voronoi.prototype.createBeachsection=function(e){var t=this.beachsectionJunkyard.pop();return t||(t=new this.Beachsection),t.site=e,t},Voronoi.prototype.leftBreakPoint=function(e,t){var r=e.site,i=r.x,o=r.y,s=o-t;if(!s)return i;var n=e.rbPrevious;if(!n)return-1/0;r=n.site;var h=r.x,a=r.y,l=a-t;if(!l)return h;var c=h-i,b=1/s-1/l,f=c/l;return b?(-f+this.sqrt(f*f-2*b*(c*c/(-2*l)-a+l/2+o-s/2)))/b+i:(i+h)/2},Voronoi.prototype.rightBreakPoint=function(e,t){var r=e.rbNext;if(r)return this.leftBreakPoint(r,t);var i=e.site;return i.y===t?i.x:1/0},Voronoi.prototype.detachBeachsection=function(e){this.detachCircleEvent(e),this.beachline.rbRemoveNode(e),this.beachsectionJunkyard.push(e)},Voronoi.prototype.removeBeachsection=function(e){var t=e.circleEvent,r=t.x,i=t.ycenter,o=this.createVertex(r,i),s=e.rbPrevious,n=e.rbNext,h=[e],a=Math.abs;this.detachBeachsection(e);for(var l=s;l.circleEvent&&a(r-l.circleEvent.x)<1e-9&&a(i-l.circleEvent.ycenter)<1e-9;)s=l.rbPrevious,h.unshift(l),this.detachBeachsection(l),l=s;h.unshift(l),this.detachCircleEvent(l);for(var c=n;c.circleEvent&&a(r-c.circleEvent.x)<1e-9&&a(i-c.circleEvent.ycenter)<1e-9;)n=c.rbNext,h.push(c),this.detachBeachsection(c),c=n;h.push(c),this.detachCircleEvent(c);var b,f=h.length;for(b=1;b<f;b++)c=h[b],l=h[b-1],this.setEdgeStartpoint(c.edge,l.site,c.site,o);l=h[0],c=h[f-1],c.edge=this.createEdge(l.site,c.site,void 0,o),this.attachCircleEvent(l),this.attachCircleEvent(c)},Voronoi.prototype.addBeachsection=function(e){for(var t,r,i,o,s=e.x,n=e.y,h=this.beachline.root;h;)if((i=this.leftBreakPoint(h,n)-s)>1e-9)h=h.rbLeft;else{if(!((o=s-this.rightBreakPoint(h,n))>1e-9)){i>-1e-9?(t=h.rbPrevious,r=h):o>-1e-9?(t=h,r=h.rbNext):t=r=h;break}if(!h.rbRight){t=h;break}h=h.rbRight}var a=this.createBeachsection(e);if(this.beachline.rbInsertSuccessor(t,a),t||r){if(t===r)return this.detachCircleEvent(t),r=this.createBeachsection(t.site),this.beachline.rbInsertSuccessor(a,r),a.edge=r.edge=this.createEdge(t.site,a.site),this.attachCircleEvent(t),void this.attachCircleEvent(r);if(t&&!r)return void(a.edge=this.createEdge(t.site,a.site));if(t!==r){this.detachCircleEvent(t),this.detachCircleEvent(r);var l=t.site,c=l.x,b=l.y,f=e.x-c,u=e.y-b,d=r.site,p=d.x-c,v=d.y-b,y=2*(f*v-u*p),g=f*f+u*u,R=p*p+v*v,x=this.createVertex((v*g-u*R)/y+c,(f*R-p*g)/y+b);return this.setEdgeStartpoint(r.edge,l,d,x),a.edge=this.createEdge(l,e,void 0,x),r.edge=this.createEdge(e,d,void 0,x),this.attachCircleEvent(t),void this.attachCircleEvent(r)}}},Voronoi.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},Voronoi.prototype.attachCircleEvent=function(e){var t=e.rbPrevious,r=e.rbNext;if(t&&r){var i=t.site,o=e.site,s=r.site;if(i!==s){var n=o.x,h=o.y,a=i.x-n,l=i.y-h,c=s.x-n,b=s.y-h,f=2*(a*b-l*c);if(!(f>=-2e-12)){var u=a*a+l*l,d=c*c+b*b,p=(b*u-l*d)/f,v=(a*d-c*u)/f,y=v+h,g=this.circleEventJunkyard.pop();g||(g=new this.CircleEvent),g.arc=e,g.site=o,g.x=p+n,g.y=y+this.sqrt(p*p+v*v),g.ycenter=y,e.circleEvent=g;for(var R=null,x=this.circleEvents.root;x;)if(g.y<x.y||g.y===x.y&&g.x<=x.x){if(!x.rbLeft){R=x.rbPrevious;break}x=x.rbLeft}else{if(!x.rbRight){R=x;break}x=x.rbRight}this.circleEvents.rbInsertSuccessor(R,g),R||(this.firstCircleEvent=g)}}}},Voronoi.prototype.detachCircleEvent=function(e){var t=e.circleEvent;t&&(t.rbPrevious||(this.firstCircleEvent=t.rbNext),this.circleEvents.rbRemoveNode(t),this.circleEventJunkyard.push(t),e.circleEvent=null)},Voronoi.prototype.connectEdge=function(e,t){var r=e.vb;if(r)return!0;var i,o,s=e.va,n=t.xl,h=t.xr,a=t.yt,l=t.yb,c=e.lSite,b=e.rSite,f=c.x,u=c.y,d=b.x,p=b.y,v=(f+d)/2,y=(u+p)/2;if(this.cells[c.voronoiId].closeMe=!0,this.cells[b.voronoiId].closeMe=!0,p!==u&&(i=(f-d)/(p-u),o=y-i*v),void 0===i){if(v<n||v>=h)return!1;if(f>d){if(!s||s.y<a)s=this.createVertex(v,a);else if(s.y>=l)return!1;r=this.createVertex(v,l)}else{if(!s||s.y>l)s=this.createVertex(v,l);else if(s.y<a)return!1;r=this.createVertex(v,a)}}else if(i<-1||i>1)if(f>d){if(!s||s.y<a)s=this.createVertex((a-o)/i,a);else if(s.y>=l)return!1;r=this.createVertex((l-o)/i,l)}else{if(!s||s.y>l)s=this.createVertex((l-o)/i,l);else if(s.y<a)return!1;r=this.createVertex((a-o)/i,a)}else if(u<p){if(!s||s.x<n)s=this.createVertex(n,i*n+o);else if(s.x>=h)return!1;r=this.createVertex(h,i*h+o)}else{if(!s||s.x>h)s=this.createVertex(h,i*h+o);else if(s.x<n)return!1;r=this.createVertex(n,i*n+o)}return e.va=s,e.vb=r,!0},Voronoi.prototype.clipEdge=function(e,t){var r=e.va.x,i=e.va.y,o=e.vb.x,s=e.vb.y,n=0,h=1,a=o-r,l=s-i,c=r-t.xl;if(0===a&&c<0)return!1;var b=-c/a;if(a<0){if(b<n)return!1;b<h&&(h=b)}else if(a>0){if(b>h)return!1;b>n&&(n=b)}if(c=t.xr-r,0===a&&c<0)return!1;if(b=c/a,a<0){if(b>h)return!1;b>n&&(n=b)}else if(a>0){if(b<n)return!1;b<h&&(h=b)}if(c=i-t.yt,0===l&&c<0)return!1;if(b=-c/l,l<0){if(b<n)return!1;b<h&&(h=b)}else if(l>0){if(b>h)return!1;b>n&&(n=b)}if(c=t.yb-i,0===l&&c<0)return!1;if(b=c/l,l<0){if(b>h)return!1;b>n&&(n=b)}else if(l>0){if(b<n)return!1;b<h&&(h=b)}return n>0&&(e.va=this.createVertex(r+n*a,i+n*l)),h<1&&(e.vb=this.createVertex(r+h*a,i+h*l)),(n>0||h<1)&&(this.cells[e.lSite.voronoiId].closeMe=!0,this.cells[e.rSite.voronoiId].closeMe=!0),!0},Voronoi.prototype.clipEdges=function(e){for(var t,r=this.edges,i=r.length,o=Math.abs;i--;)t=r[i],(!this.connectEdge(t,e)||!this.clipEdge(t,e)||o(t.va.x-t.vb.x)<1e-9&&o(t.va.y-t.vb.y)<1e-9)&&(t.va=t.vb=null,r.splice(i,1))},Voronoi.prototype.closeCells=function(e){for(var t,r,i,o,s,n,h,a,l,c=e.xl,b=e.xr,f=e.yt,u=e.yb,d=this.cells,p=d.length,v=Math.abs;p--;)if(t=d[p],t.prepareHalfedges()&&t.closeMe){for(i=t.halfedges,o=i.length,r=0;r<o;){if(n=i[r].getEndpoint(),a=i[(r+1)%o].getStartpoint(),v(n.x-a.x)>=1e-9||v(n.y-a.y)>=1e-9)switch(!0){case this.equalWithEpsilon(n.x,c)&&this.lessThanWithEpsilon(n.y,u):if(l=this.equalWithEpsilon(a.x,c),h=this.createVertex(c,l?a.y:u),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;n=h;case this.equalWithEpsilon(n.y,u)&&this.lessThanWithEpsilon(n.x,b):if(l=this.equalWithEpsilon(a.y,u),h=this.createVertex(l?a.x:b,u),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;n=h;case this.equalWithEpsilon(n.x,b)&&this.greaterThanWithEpsilon(n.y,f):if(l=this.equalWithEpsilon(a.x,b),h=this.createVertex(b,l?a.y:f),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;n=h;case this.equalWithEpsilon(n.y,f)&&this.greaterThanWithEpsilon(n.x,c):if(l=this.equalWithEpsilon(a.y,f),h=this.createVertex(l?a.x:c,f),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;if(n=h,l=this.equalWithEpsilon(a.x,c),h=this.createVertex(c,l?a.y:u),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;if(n=h,l=this.equalWithEpsilon(a.y,u),h=this.createVertex(l?a.x:b,u),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;if(n=h,l=this.equalWithEpsilon(a.x,b),h=this.createVertex(b,l?a.y:f),s=this.createBorderEdge(t.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,t.site,null)),o++,l)break;default:throw"Voronoi.closeCells() > this makes no sense!"}r++}t.closeMe=!1}},Voronoi.prototype.quantizeSites=function(e){for(var t,r=this.ε,i=e.length;i--;)t=e[i],t.x=Math.floor(t.x/r)*r,t.y=Math.floor(t.y/r)*r},Voronoi.prototype.recycle=function(e){if(e){if(!(e instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=e}},Voronoi.prototype.compute=function(e,t){var r=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var i=e.slice(0);i.sort(function(e,t){var r=t.y-e.y;return r||t.x-e.x});for(var o,s,n,h=i.pop(),a=0,l=this.cells;;)if(n=this.firstCircleEvent,h&&(!n||h.y<n.y||h.y===n.y&&h.x<n.x))h.x===o&&h.y===s||(l[a]=this.createCell(h),h.voronoiId=a++,this.addBeachsection(h),s=h.y,o=h.x),h=i.pop();else{if(!n)break;this.removeBeachsection(n.arc)}this.clipEdges(t),this.closeCells(t);var c=new Date,b=new this.Diagram;return b.cells=this.cells,b.edges=this.edges,b.vertices=this.vertices,b.execTime=c.getTime()-r.getTime(),this.reset(),b},"undefined"!=typeof module&&(module.exports=Voronoi);
},{}],20:[function(require,module,exports){
module.exports.RADIUS=6378137,module.exports.FLATTENING=1/298.257223563,module.exports.POLAR_RADIUS=6356752.3142;
},{}],21:[function(require,module,exports){
// ---------------------------------------------------------------------------------------------------------------------
// GeoJSONUtils
//
// @module
// ---------------------------------------------------------------------------------------------------------------------

const area = require('turf-area');
const _ = require('lodash');

// ---------------------------------------------------------------------------------------------------------------------

class GeoJSONUtils {
    constructor() {
    }

    /**
     * Checks to see if the feature is a Polygon formatted as a MultiPolygon.
     *
     * @param {Polygon} polygon
     * @returns {Polygon}
     */
    fixMultiPoly(polygon) {
        if(polygon.geometry.type === 'MultiPolygon' && polygon.geometry.coordinates[0].length === 1) {
            // Handle a Polygon in the form of a MultiPolygon
            polygon.geometry.type = 'Polygon';
            polygon.geometry.coordinates = polygon.geometry.coordinates[0];

            return polygon;
        } else if(polygon.geometry.type === 'MultiPolygon' && polygon.geometry.coordinates[0].length > 1) {
            // Handle a true MultiPolygon by returning the Polygon of largest area
            const polygons = _.map(polygon.geometry.coordinates[0], ((coordinates) => {
                return this._toGeoJSONFeature(
                    this._toGeoJSONPolygon(coordinates)
                );
            }));
            const collectionArea = _.map(polygons, area);
            const largestAreaIndex = _.indexOf(collectionArea, _.max(collectionArea));

            return polygons[largestAreaIndex];
        } else {
            return polygon;
        }
    }

    /**
     * Takes a polygon and generates the sites needed to generate Voronoi
     *
     * @param {Polygon} polygon
     * @param {number} decimalPlaces A power of 10 used to truncate the decimal places of the polygon sites and
     *   bbox. This is a workaround due to the issue referred to here:
     *   https://github.com/gorhill/Javascript-Voronoi/issues/15
     *   Defaults to 1e-20.
     * @returns {{sites: Array, bbox: {xl: number, xr: number, yt: number, yb: number}}}
     */
    sites(polygon, decimalPlaces) {
        if(decimalPlaces === undefined) {
            decimalPlaces = 1e-20;
        }
        let polygonSites = [];
        let xmin,xmax,ymin,ymax;
        for(let i = 0; i < polygon.geometry.coordinates.length; i++) {
            const polyRing = polygon.geometry.coordinates[i].slice();
            for(let j = 0; j < polyRing.length-1; j++) {
                //Push original point
                polygonSites.push({
                    x: Math.floor(polyRing[j][0] / decimalPlaces) * decimalPlaces,
                    y: Math.floor(polyRing[j][1] / decimalPlaces) * decimalPlaces
                });
                //Push midpoints of segments
                polygonSites.push({
                    x: Math.floor(((polyRing[j][0]+polyRing[j+1][0]) / 2) / decimalPlaces) * decimalPlaces,
                    y: Math.floor(((polyRing[j][1]+polyRing[j+1][1]) / 2) / decimalPlaces) * decimalPlaces
                });
                //initialize bounding box
                if((i === 0) && (j === 0)) {
                    xmin = Math.floor(polyRing[j][0] / decimalPlaces) * decimalPlaces;
                    xmax = xmin;
                    ymin = Math.floor(polyRing[j][1] / decimalPlaces) * decimalPlaces;
                    ymax = ymin;
                } else {
                    if(polyRing[j][0] < xmin) {
                        xmin = Math.floor(polyRing[j][0] / decimalPlaces) * decimalPlaces;
                    }
                    if(polyRing[j][0] > xmax) {
                        xmax = Math.floor(polyRing[j][0] / decimalPlaces) * decimalPlaces;
                    }
                    if(polyRing[j][1] < ymin) {
                        ymin = Math.floor(polyRing[j][1] / decimalPlaces) * decimalPlaces;
                    }
                    if(polyRing[j][1] > ymax) {
                        ymax = Math.floor(polyRing[j][1] / decimalPlaces) * decimalPlaces;
                    }
                }
            }
        }
        return {
            sites: polygonSites,
            bbox: {
                xl: xmin,
                xr: xmax,
                yt: ymin,
                yb: ymax
            }
        };
    }

    /**
     * @param {Geometry} geom
     * @returns {{type: string, geometry: Geometry}}
     * @private
     */
    _toGeoJSONFeature(geom) {
        return {
            "type": "Feature",
            "geometry": geom
        };
    }

    /**
     * @param {number[]} coordinates
     * @returns {{type: string, coordinates: number[]}}
     * @private
     */
    _toGeoJSONPolygon(coordinates) {
        const geom = {
            "type": "Polygon",
            "coordinates": [coordinates]
        };
        return(geom);
    }
}

// ---------------------------------------------------------------------------------------------------------------------

module.exports = new GeoJSONUtils();

// ---------------------------------------------------------------------------------------------------------------------
},{"lodash":4,"turf-area":6}]},{},[2])(2)
});
